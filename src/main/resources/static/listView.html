<!DOCTYPE html>
<html>
<head>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="js/custom.js"></script>

    <title>My Lists</title>

    <!--Bootstrap-->
     <!--Latest compiled and minified CSS -->
    <!--<link rel="stylesheet" href="css/bootstrap.css">-->
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

    <!-- AngularJS -->
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.6/angular.min.js"></script>

    <!--<script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>-->

    <script src="js/jquery.mmenu.min.all.js"></script>
    <link rel="stylesheet" href="css/jquery.mmenu.all.css">





    <!-- Twitter Bootstrap -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">

    <!-- Material Design for Bootstrap -->
    <link href="dist/css/material-wfont.min.css" rel="stylesheet">
    <link href="dist/css/ripples.min.css" rel="stylesheet">

    <!--Custom Assets-->
    <link rel="stylesheet" href="css/custom.css">
    <script src="js/custom.js"></script>

    <script src="js/controllers.js"></script>

</head>
<body ng-app="listView" ng-controller="itemsController">
<div id="menu">
        <a href="#my-menu">Open the menu</a>


    <nav id="my-menu">
        <!--List of List Names-->
        <ul>
            <li
                    ng-repeat="list in lists"
                    ng-click="setCurrentList(list.oid)">
                <a >{{list.name}}</a>
            </li>

        </ul>
    </nav>
</div><!--Overall Wrapper for menu-->

<div id="page">

    <div>

             <br>           <br>



            <!--List Info-->
        <h1  id="list_name"> {{itemList.listName}} </h1>
            <br>
            Last modified: {{itemList.lastModified}}
            <br><br>
            <list>
            	<tr>
            		<td><a>User Name</a></td>
            		<td><input type = "text" id = "InviteUser" ng-model = "userIDField"></td>
            		<td><button ng-click = "inviteUserToList(listID); resetUserName()">Invite User</button></td>
            	</tr>
            <br><br>
                <tr>
                	<!--<td><a>Item Name</a></td>-->
                	<!--<td><input type = "text" id = "itemName"  ng-model = "itemNameInput"></td>-->
                	<!--<td><a>Item Quantity</a></td>-->
                	<!--<td><input type = "text" id = "itemQuantity"  ng-model = "itemQuantityInput"></td>-->
                	<!--&lt;!&ndash; add in ng-keyup="event=$event" with keycode = 13 for enter key &ndash;&gt;-->
                	<!--<td><button ng-click="addItemToList(listID,UserOID);resetItemAdd()">Add item</button>-->
                </tr>
            </list>
            <br><br>

        <!-- Modal -->
        <div class="modal fade" id="editItemModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">Edit Item</h4>
                    </div>
                    <div class="modal-body"  >
                        <tr>
                            <td><input type = "text"  ng-model = "editField_itemName"></td>
                            <td><input type = "text"  ng-model = "editField_quantity"></td>
                            <td><input type = "text"  ng-model = "editField_price"></td>

                            <!--<td><input type = "text" id = "{{item.name}}itemPrice" value = "{{item.price}}"></td>-->
                        </tr>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary"
                                ng-click = "editItemAndUpdate(listID, editField_itemName, editField_oldItemName, UserOID, editField_isChecked, editField_price, editField_quantity )">
                            Save changes
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!--    //editItem(listID, itemName, userName, checked, price, itemQuantity, callback)-->

        <div class="row">
            <div class="col-md-3 col-sm-4 col-xs-1  col-lg-4"></div>
            <div class="col-md-6 col-sm-4 col-xs-10 col-lg-4">
                <div class="well">
                    <input type = "text" id = "itemName"  ng-model = "itemNameInput">
                    <!-- add in ng-keyup="event=$event" with keycode = 13 for enter key -->
                    <button ng-click="addItemToList(listID,UserOID);resetItemAdd()">Add item</button>

                    <!--Items in List-->
                        <div ng-repeat="item in itemList.items">
                            <div class="row">
                                <div class="col-md-12 no_padding" >

                                    <div class="list-group" >

                                        <!--<a class="list-group-item" >-->
                                        <input type="checkbox" ng-checked="item.isChecked" id="{{$index}}"
                                               ng-model="checkedState"
                                               ng-change="updateCheckedState( item,checkedState )" >

                                        <!--<span  ng-click="showEditModal(5,5,5,5)" data-toggle="modal" data-target="#myModal{{item.name}}">{{item.name}}-->

                                        <span  ng-click="showEditModal(listID, item.name, UserOID, item.isChecked, item.price, item.quantity )"
                                               data-toggle="modal" data-target="#myModal{{item.name}}">{{item.name}}
                                            <!--Control if quantity should show. Do not display if quantity is <= 1 -->
                                            <span ng-if="item.quantity > 1">x {{item.quantity}}</span>

                                        </span>
                                        <i class="mdi-action-delete delete_button"
                                           ng-click="removeItemAndUpdate(listID, item.name)"></i>

                                        <br>

                                    </div>
                                </div>

                            </div>     <!--row-->

                        </div>    <!--Ng-repeat-->
                    <br>

                </div>

            </div>
            <div class="col-md-3 col-sm-4 col-xs-1 col-lg-4"></div>
        </div>

        <button ng-click = "removeListAndUpdate(listID,UserOID)">Delete List</button>
        <button ng-click = "removeAllCheckedItemsAndUpdate(listID, itemList)">Remove Checked</button>
        </div>
    </div>
</body>

<script type="text/javascript">
    $('#editItemModal').modal({ show: false})

    $(document).ready(function() {
        $("#my-menu").mmenu();
    });
</script>
</html>